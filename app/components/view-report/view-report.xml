<Page xmlns="http://www.nativescript.org/tns.xsd"
      xmlns:g="components/grid-view/grid-view"
      loaded="pageLoaded"
      navigatedTo="navigatedTo" >

  <GridLayout rows="auto, auto, auto, auto, *">
    <Label text="{{ report.Title }}" cssClass="title" />
    <Label text="{{ totalCost | formatCurrency }}" cssClass="total" />
    <Label row="1" text="{{ report.BusinessPurpose }}" cssClass="subTitle" />
    <Label row="2" text="{{ report.Date | formatDate }}" cssClass="subTitle" />

    <PieChart row="3" items="{{ expensesByCategory }}" valueProperty="TotalCost" canSelect="true" showLabels="true" cssClass="categoriesChart" />

    <ListView row="4" items="{{ expenses }}" itemTap="expenseTap" cssClass="expensesListView">
      <ListView.itemTemplate>
        <GridLayout columns="auto, *, auto">
          <Border backgroundColor="{{ categoryColor }}" cssClass="category" />
          <StackLayout col="1">
            <Label text="{{ expense.Title }}" cssClass="itemTitle" />
            <Label text="{{ expense.Date | formatDate }}" cssClass="itemSubTitle" />
            <Label text="{{ expense.Location }}" cssClass="itemSubTitleLast" />
          </StackLayout>
          <Label col="2" text="{{ expense.Cost | formatCurrency }}" cssClass="itemCost" />
        </GridLayout>
      </ListView.itemTemplate>
    </ListView>

    <AbsoluteLayout rowSpan="5" cssClass="fabContainer" style.visibility="{{ fabVisibility }}" >
      <Image src="res://fab" tap="addExpenseTap" stretch="none" cssClass="fab" />
    </AbsoluteLayout>

    <ActivityIndicator rowSpan="5" busy="{{ isLoading }}" />
  </GridLayout>
</Page>